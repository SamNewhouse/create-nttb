name: Post on Release

permissions: {}

on:
  workflow_run:
    workflows: ["Create, Release & Publish to NPM"]
    types:
      - completed

jobs:
  x:
    if: ${{ github.event.workflow_run.conclusion == 'success' }}
    runs-on: ubuntu-latest
    steps:
      - name: Tweet new release
        uses: JasonEtco/tweet@v1
        env:
          TWITTER_API_KEY: ${{ secrets.TWITTER_API_KEY }}
          TWITTER_API_SECRET_KEY: ${{ secrets.TWITTER_API_SECRET_KEY }}
          TWITTER_ACCESS_TOKEN: ${{ secrets.TWITTER_ACCESS_TOKEN }}
          TWITTER_ACCESS_TOKEN_SECRET: ${{ secrets.TWITTER_API_SECRET_KEY }}
        with:
          status: "ðŸš€ create-nttb v${{ github.event.workflow_run.head_branch }} released! See details at: https://github.com/SamNewhouse/create-nttb/releases"
